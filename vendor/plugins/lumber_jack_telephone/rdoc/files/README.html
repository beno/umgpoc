<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Sep 13 07:44:11 -0600 2009</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="../classes/LumberJack/Telephone.html">LumberJack::Telephone</a>
</p>
<p>
This plugin is a part of the <a
href="../classes/LumberJack.html">LumberJack</a> Project &#8212; a library
of reusable business objects for Rails Applications. Please read
&#8216;about_lumber_jack&#8217; for more background on the <a
href="../classes/LumberJack.html">LumberJack</a> Project.
</p>
<p>
This plugin installs a polymorphic Telephone model into your application.
After it is installed, you will be able to associate multiple Telephones
with any model in your application. You will also have a polymorphic
TelephonesController and views to re-use on all of your associated models.
Telephone uses the &#8216;has_many&#8217; associations included in Rails
plus &#8216;acts_as_list&#8217; to maintain Telephones as a sortable list.
</p>
<p>
Example Usage:
</p>
<p>
In addition to associating several Telephones with your Model, you will
also gain some helper methods to manage Model and associated Telephones.
Here is a brief example:
</p>
<pre>
  person.rb:
  ---------
  class Person &lt; ActiveRecord::Base
    has_many_telephones
  end
</pre>
<p>
Your Person model now has the usual Rails &#8216;has_many&#8217;
functionality plus some additional methods:
</p>
<pre>
  Person.find_all_by_telephone('number') =&gt; array of Person models for that 'number'.
  p = Person.find(1)
  p.telephone_for('purpose') =&gt; The Telephone object for that 'purpose'.
  p.telephone_for_purpose =&gt; The same thing called differently
  p.telephone_for('purpose').display_string =&gt; '(123) 456-7890' A formatted string.
  p.telephone_for_purpose.display_string =&gt; '(123) 456-7890' A formatted string.
  p.telephone_best =&gt; The telephone object that you have sorted to the top of the telephones list.

  routes.rb (modify the standard route for :people):
  ---------
  map.resources :people, :has_many =&gt; :telephones
</pre>
<p>
Your PersonController now has access to the polymorphic
TelephonesController and the views required to manage Telephones for
people. You will notice that we do not allow direct access to the Telephone
controller &#8212; All Telephones are accessed through a parent Model and
its Controller.
</p>
<p>
Plugin Installation for a brand new project:
</p>
<p>
Rails 2.3.2 or higher!
</p>
<p>
Create a new rails project:
</p>
<pre>
  rails test_telephone
</pre>
<p>
Move into your new directory:
</p>
<pre>
  script/generate scaffold Organization name:string
  script/generate scaffold Person name:string
  script/plugin install acts_as_list
</pre>
<p>
Install <a href="../classes/LumberJack.html">LumberJack</a>:
</p>
<pre>
  script/plugin install git://github.com/brianlong/lumber_jack_telephone.git
  script/generate lumber_jack_telephone
</pre>
<p>
Add this to &#8216;app/models/organization.rb&#8217; &amp;
&#8216;app/models/people.rb&#8217;:
</p>
<pre>
  has_many_telephones #(Put it right after the class definition)
</pre>
<p>
Move &#8216;views/layouts/organizations.html.erb&#8217; to
&#8216;views/layouts/application.html.erb&#8217; (Not sure why Rails does
not create this file with every new project)
</p>
<p>
Delete &#8216;views/layouts/organizations.html.erb&#8217; &amp;
&#8216;views/layouts/people.html.erb&#8216;
</p>
<p>
Modify &#8216;views/layouts/application.html.erb&#8217; to include this in
the &#8216;head&#8217; section:
</p>
<pre>
  &lt;%= javascript_include_tag :defaults %&gt;
</pre>
<p>
Modify &#8216;config/routes.rb&#8217; as follows:
</p>
<pre>
  map.resources :organizations, :has_many =&gt; :telephones
  map.resources :people, :has_many =&gt; :telephones
  map.root :controller =&gt; &quot;organizations&quot;
</pre>
<p>
Delete &#8216;public/index.html&#8216;
</p>
<p>
Add this partial reference to
&#8216;app/views/organizations/show.html.erb&#8217;:
</p>
<pre>
  &lt;%= render :partial =&gt; 'telephones/list', :locals =&gt; {:telephonic =&gt; organization} %&gt;
</pre>
<p>
Add this partial reference to &#8216;app/views/people/show.html.erb&#8217;:
</p>
<pre>
  &lt;%= render :partial =&gt; 'telephones/list', :locals =&gt; {:telephonic =&gt; person} %&gt;
</pre>
<p>
Then:
</p>
<pre>
  rake db:create
  rake db:migrate
  script/server
</pre>
<p>
Create an Organization and a Person then add some telephone numbers for
each.
</p>
<p>
Use script/console to check out some methods that the plugin adds to your
models:
</p>
<pre>
  Model.find_all_by_telephone('number') =&gt; array of Models for that 'number'
  m = Model.find(1)
  m.telephone_for('purpose') =&gt; The Telephone object for that 'purpose'.
  m.telephone_for_purpose =&gt; The same thing called differently
  m.telephone_for('purpose').display_string =&gt; '(123) 456-7890' A formatted string.
  m.telephone_for_purpose.display_string =&gt; '(123) 456-7890' A formatted string.
  m.telephone_best =&gt; The Telephone object that you have sorted to the top of the list.
</pre>
<p>
Copyright (c) 2009 Brian K. Long, released under the MIT license
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>